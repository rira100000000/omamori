# This file contains vulnerabilities that AI analysis can help detect.

require 'net/http'
require 'uri'

API_KEY = "HARDCODED_SECRET_API_KEY_12345" # Hardcoded sensitive information

def fetch_data(user_input)
  # Insufficient input validation
  if user_input.length > 100
    puts "Input too long, truncating."
    user_input = user_input[0..99]
  end

  uri = URI("https://api.example.com/data?query=#{user_input}&api_key=#{API_KEY}")
  response = Net::HTTP.get_response(uri)

  if response.is_a?(Net::HTTPSuccess)
    puts "Data fetched successfully: #{response.body}"
  else
    # Poor error handling - reveals internal details
    puts "Error fetching data: #{response.code} - #{response.message}"
  end
end

# Example usage
# fetch_data("some data")
# fetch_data("a" * 200) # Long input